import{_ as b,r as m,a as g,b as k,c as r,o as s,d as x,e as t,w as S,f as _,g as h,h as F,v as w,t as p,F as f,i as C,j as B,k as D}from"./index-DBlrQVjQ.js";const N={class:"block"},T={key:0,class:"selected-files"},E={__name:"FormBlock",setup(c){const a=m(null),n=m([]),o=g({name:""}),v=()=>{a.value.click()},d=l=>{n.value=Array.from(l.target.files)},y=async()=>{if(!o.name||n.value.length===0){alert("Please enter a name and select at least one file");return}const l=new FormData;l.append("name",o.name),n.value.forEach(e=>{l.append("files",e)});try{const e=await fetch("databaseCombiner/api/job/create",{method:"POST",body:l});if(e.ok){const u=await e.json();console.log("Success:",u),o.name="",n.value=[],a.value.value=""}else console.error("Error:",e.statusText)}catch(e){console.error("Error:",e)}};return(l,e)=>{const u=k("v-file-input");return s(),r(f,null,[e[6]||(e[6]=x(" //TODO: change ")),t("div",N,[t("form",{onSubmit:S(y,["prevent"]),enctype:"multipart/form-data"},[e[3]||(e[3]=t("label",{for:"name"},"Bestand:",-1)),e[4]||(e[4]=t("br",null,null,-1)),_(u,{label:"Selecteer een bestand",variant:"outlined",color:"primary",class:"mb-4",ref_key:"fileInput",ref:a,onChange:d,accept:".xlsx"},null,512),h(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=i=>o.name=i),placeholder:"Enter a client",required:""},null,512),[[w,o.name]]),e[5]||(e[5]=t("br",null,null,-1)),t("input",{type:"file",id:"file",ref_key:"fileInput",ref:a,onChange:d,accept:".xlsx",multiple:"",style:{display:"none"}},null,544),t("button",{type:"button",id:"uploadButton",onClick:v,class:"btn btn-primary"},[t("span",null,p(n.value.length>0?`${n.value.length} file(s) selected`:"Select files and combine"),1)]),n.value.length>0?(s(),r("div",T,[e[1]||(e[1]=t("h4",null,"Selected files:",-1)),t("ul",null,[(s(!0),r(f,null,C(n.value,i=>(s(),r("li",{key:i.name},p(i.name),1))),128))]),e[2]||(e[2]=t("button",{type:"submit",class:"btn btn-success"}," Combine Database ",-1))])):F("",!0)],32)])],64)}}},I=b(E,[["__scopeId","data-v-855de620"]]),V={class:"new-job"},j={__name:"NewJobForm",setup(c){return(a,n)=>(s(),r("div",V,[n[0]||(n[0]=t("h2",null,"Selecteer een bestand",-1)),_(I)]))}},$=b(j,[["__scopeId","data-v-174d8eae"]]),P=B({__name:"UploadPage",setup(c){return(a,n)=>(s(),D($))}});export{P as default};
